<template>
  <div class="tw-break-after-page">
    <div>
      <h1 class="tw-text-center tw-font-semibold tw-mb-6">
        {{ $tc('print.program.title') }}: {{ period.description }}
      </h1>
    </div>

    <generic-error-message v-if="$fetchState.error" :error="$fetchState.error" />
    <program-day
      v-for="day in days"
      v-else
      :key="'day' + day.id"
      :day="day"
      :show-daily-summary="showDailySummary"
      :show-activities="showActivities"
      :categories="categories"
      :index="index"
    />
  </div>
</template>

<script>
export default {
  props: {
    period: { type: Object, required: true },
    categories: { type: Array, required: true },
    showDailySummary: { type: Boolean, required: true },
    showActivities: { type: Boolean, required: true },
    index: { type: Number, required: true },
  },
  data() {
    return {
      days: null,
    }
  },
  async fetch() {
    await Promise.all([
      this.period.days().$loadItems(),
      this.period.scheduleEntries().$loadItems(),
      this.period.contentNodes().$loadItems(),
    ])

    this.days = this.period.days().items
  },
}
</script>
